Ejercicio de programación VI: Estructuras de Control
====================================================

### [IMSER 2013]

De otros años:

* Ejercicio de programación:
  - for: hacer un script que cuente por fila de una matriz la cantidad de elementos que cumplan una condición (mayores que 0, por ejemplo)
  - complementar con un ej. extra que haga lo mismo pero usando apply

* Cambiar parte d del útimo parcial: si el bus tiene el máximo de pasajeros no sube a más nadie y si tiene el mínimo (0) no baja nadie.

* Crecimiento exponencial ...?

* Caminata del borracho?

* Símil función preg?

* Loops con errores: un while que es infinito, un for que tiene mal puesto el rango, ...

Ejercicio 1: secuencia de Fibonacci
-----------------------------------

Ideada por el matemático italiano [Fibonacci](https://es.wikipedia.org/wiki/Fibonacci), la serie homónima se trata de una secuencia de números creada con una regla muy simple. Se trata simplemente de sumar los dos números anteriores para generar el siguiente, comenzando por el 0 y el 1. Así el tercer número es 1 = 1 + 0, el cuarto número es 2 = 1 + 1, el quinto número es 3 = 2 + 1, etc. Matemáticamente se puede describir como una secuencia $S$ que sigue la siguiente ecuación:

$$
  S_i = S_{i - 1} + S_{i - 2}
$$

y agregando la condición de que los valores iniciales $S_0$ y $S_1$ equivalen a 1. Así los primeros 10 números de la secuencia de Fibonacci son: 0, 1, 1, 2, 3, 5, 8, 13, 21 y 34.

### 1a. Calcular los valores del $S_0$ al $S_{20}$.

En este ejercicio usted deberá trabajar modificando el archivo `fibonacci.R`. En el mismo usted encontrará que el vector `fibo` es el designado para guardar los primeros 20 elementos de la secuencia. Para lograr hacer esta secuencia usted tendrá que crear un loop del tipo `for` con el número correcto de iteraciones. No olvide considerar que los primeros dos elementos de la secuencia ya están agregados al vector `fibo` a la hora de determinar el número de iteraciones así como los valores de `i` inicial e `i` final.

Puede comprobar que su resultado es correcto comparando la siguiente imagen, generada con los comandos:

```{r echo=FALSE}
fibo <- c(0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181)
```
```{r}
i <- 0:19
plot(fibo ~ i, main="Secuencia de Fibonacci", ylab=expression(S[i]), xlab="i")
```

### 1b. Crear una función genérica

En esta parte del ejercicio usted trabajará modificando el archivo `funcionFibonacci.R`. El objetivo de este archivo es crear una función que calcule la secuencia de Fibonacci para una cantidad de números arbitraria. Tome en cuenta que el código es casi idéntico al contenido en el archivo `fibonacci.R`, pero debe ser modificado estratégicamente para que el argumento `n` modifique el resultado final.

Si usted ha modificado correctamente el archivo `funcionFibonacci.R` entonces el siguiente comando debería devolver el resultado que se muestra aquí:
```{r echo=FALSE}
funcionFibonacci <- function(n = 20) {
  fibo <- numeric(n)
  fibo[2] <- 1
  for (i in 3:n) {
    fibo[i] <- fibo[i - 1] + fibo[i - 2]
  }
  fibo
}
```
```{r}
funcionFibonacci(13)
```

- - -

Parcial II
==========

#### Curso IMSER 2012

Instrucciones:
--------------

En el archivo “[parcial-II.R](http://eva.universidad.edu.uy/file.php/1454/ejercicios_de_programacion/parcial-II.R)” ud. tiene un script en el cual deberá guardar todos los comandos del ejercicio, siguiendo la demarcación que se muestra en el mismo.

Nota: los ejercicios del parcial son dependientes de los anteriores en el sentido de que utilizan objetos creados, pero no implica que no se puedan tratar de resolver independientemente.

Los ejercicios con (``*``) presentan un puntaje de 1.5, mientras que los que no tienen (``*``) equivalen a 1 punto.

Una vez terminado el parcial usted deberá subir a la [página del EVA](http://eva.universidad.edu.uy/mod/assignment/view.php?id=102998) el archivo “parcial-II.R” con su código.

- - -

Letra
-----

Para simular la cantidad de pasajeros de un ómnibus urbano se ha creado el código que aparece sobre el final del ejercicio (y que también se encuentra en el script parcial-II.R). El criterio es el siguiente: el bus recorre 25 paradas, empezando el trayecto sin pasajeros. En cada parada se subirá una cantidad aleatoria de entre 0 a 6 personas (siendo todas las cantidades equiprobables), pero debido a que existe un máximo estipulado de 44 pasajeros, a partir del momento en que se alcanza ese valor el vehículo deja de subir gente.

- - -

### (``*``) a. Código incompleto

Completar el código: las líneas en blanco que se encuentran dentro de los límites del código indican en dónde debe cambiarse. **El resto de las líneas están correctas**.

Código fuente:

```{r, eval = FALSE}
# Preparación:
paradas <- 25
pasajeros <- 0

registro[1] <- pasajeros
for (i in 1:paradas) {

  # A ver si no se llenó:
  if (pasajeros >= 44) {
    # Ajuste por si llega a 44 antes de terminar:
    registro[i:paradas] <- 44
    cat('Bus lleno!\n') # Mensaje de aviso...
    break
  } # <- este no estaba

  # Si no se corta el loop, se agrega un nuevo registro:
  registro[i] <- pasajeros
  # Para ir viendo cuánto hay:
  cat('Parada', i, 'hay', pasajeros, 'pasajeros\n')
}
plot(registro, xlab='Parada', ylab='No. de pasajeros')
```

Sugerencias: (1) la función ``sample`` puede ser útil para simular la subida de pasajeros. (2) Tanto en este como en los siguientes ejercicios, en caso de no estar seguro/a de cómo proceder, puede facilitar mucho la tarea hacer un diagrama de flujo sencillo antes de empezar a escribir código.

```{r, eval = TRUE, echo = FALSE}
set.seed(11)
paradas <- 25
pasajeros <- 0
registro <- numeric(paradas)
registro[1] <- pasajeros
for (i in 1:paradas) {
  pasajeros <- pasajeros + sample(0:6, 1)
  if (pasajeros >= 44) {
    registro[i:paradas] <- 44
    break
  }
  registro[i] <- pasajeros
}
```

La siguiente imagen se obtuvo haciendo la simulación, ejecutando previamente ``set.seed(11)`` y luego el comando gráfico:

```{r}
plot(registro, xlab='Parada', ylab='No. de pasajeros')
```

- - -

### b. Cambio de loop

Modifique el código de la parte anterior de forma tal que haga lo mismo, pero utilizando un loop ``while``.

Sugerencias: (1) agrege manualmente una variable (p.ej.: ``i``) que sirva para indexar los distintos objetos y recuerde actualizarla en la linea correcta del código y (2) usar un ``if`` posterior al loop puede ser útil para sustituir los ceros del final por 44 en el vector registro (aunque no es de ninguna manera el único método).

Nota: el gráfico que se dió en la parte anterior tamibén aplica para este ejercicio. 

### (``*``) c. Función ``bus``

Modifique el código reparado en la parte **a** para crear una función llamada ``bus`` que ejecute la misma simulación, en la que el número de paradas y capacidad máxima del bus sean los argumentos de la misma. El nombre de estos argumentos son a su elección.

Como salida la función debe devolver simplemente el vector ``registro``.

Nota: recuerde que esta función debe trabajar correctamente para cualquier elección del número de paradas y máximo de pasajeros. En el siguiente ejemplo se muestra un caso que puede servir de referencia:

```{r, eval = TRUE, echo = FALSE}
bus <- function(paradas = 25, maximo = 44) {
  pasajeros <- 0
  registro <- numeric(paradas)
	registro[1] <- pasajeros
	for (i in 1:paradas) {
		pasajeros <- pasajeros + sample(0:6, 1)
		if (pasajeros >= maximo) {
			registro[i:paradas] <- maximo
			cat('Bus lleno!\n')
			break
		}
		registro[i] <- pasajeros
		cat('Parada', i, 'hay', pasajeros, 'pasajeros\n')
	}
	plot(registro, xlab='Parada', ylab='No. de pasajeros')
	registro
}
```

```{r, eval = TRUE}
set.seed(11)
# Nro. de paradas = 40
# Máximo de pasajeros = 80
x <- bus(40, 80)
```

- - -

### d. Gente que también baja

Hacer una variante del código (de cualquiera de las partes anteriores) en la que además de subir personas, a partir de la parada 10 se bajen entre 1 y 5 pasajeros por parada. Tanto la subida y la bajada deben ejecutarse **antes** de determinar si se alcanzó el máximo estipulado de pasajeros y por lo tanto si debe dejar de detenerse el bus en las paradas.

Sugerencia: puede ser muy útil hacer un diagrama de flujo sencillo para planificar el código antes de escribirlo.

El siguiente es un ejemplo del resultado de aplicar los cambios que se piden en la función ``bus``:

```{r, eval = TRUE, echo = FALSE}
bus <- function(paradas = 25, maximo = 44) {
  pasajeros <- 0
	registro <- numeric(paradas)
	registro[1] <- pasajeros
	for (i in 1:paradas) {
		pasajeros <- pasajeros + sample(0:6, 1)
		if (i >= 10)
			pasajeros <- pasajeros - sample(1:5, 1)
	  registro[i] <- pasajeros
		if (pasajeros >= maximo) {
			registro[i:paradas] <- maximo
			cat('Bus lleno!\n')
			break
		}
		cat('Parada', i, 'hay', pasajeros, 'pasajeros\n')
	}
	plot(registro, xlab='Parada', ylab='No. de pasajeros')
	registro
}
```

```{r, eval = TRUE}
set.seed(11)
x <- bus(30, 60)
```

